{
  "name": "martin - open machinery hazard",
  "description": "martin - open machinery hazard",
  "milkdrop_raw": "MILKDROP_PRESET_VERSION=201\r\nPSVERSION=3\r\nPSVERSION_WARP=3\r\nPSVERSION_COMP=3\r\n[preset00]\r\nfRating=5.000000\r\nfGammaAdj=1.980\r\nfDecay=0.500\r\nfVideoEchoZoom=1.000\r\nfVideoEchoAlpha=0.500\r\nnVideoEchoOrientation=3\r\nnWaveMode=4\r\nbAdditiveWaves=1\r\nbWaveDots=0\r\nbWaveThick=1\r\nbModWaveAlphaByVolume=1\r\nbMaximizeWaveColor=0\r\nbTexWrap=1\r\nbDarkenCenter=0\r\nbRedBlueStereo=0\r\nbBrighten=0\r\nbDarken=1\r\nbSolarize=0\r\nbInvert=0\r\nfWaveAlpha=0.001\r\nfWaveScale=0.527\r\nfWaveSmoothing=0.450\r\nfWaveParam=0.000\r\nfModWaveAlphaStart=0.000\r\nfModWaveAlphaEnd=1.320\r\nfWarpAnimSpeed=1.459\r\nfWarpScale=2.007\r\nfZoomExponent=1.00000\r\nfShader=0.000\r\nzoom=0.99990\r\nrot=0.00000\r\ncx=0.500\r\ncy=0.500\r\ndx=0.00000\r\ndy=0.00000\r\nwarp=0.01000\r\nsx=0.99990\r\nsy=1.00000\r\nwave_r=0.800\r\nwave_g=0.490\r\nwave_b=1.000\r\nwave_x=0.500\r\nwave_y=0.500\r\nob_size=0.000\r\nob_r=0.000\r\nob_g=0.300\r\nob_b=0.000\r\nob_a=1.000\r\nib_size=0.000\r\nib_r=0.000\r\nib_g=1.000\r\nib_b=0.000\r\nib_a=1.000\r\nnMotionVectorsX=64.000\r\nnMotionVectorsY=48.000\r\nmv_dx=0.000\r\nmv_dy=0.000\r\nmv_l=1.850\r\nmv_r=0.500\r\nmv_g=0.500\r\nmv_b=0.500\r\nmv_a=0.000\r\nb1n=0.000\r\nb2n=0.000\r\nb3n=0.000\r\nb1x=1.000\r\nb2x=1.000\r\nb3x=1.000\r\nb1ed=0.000\r\nwavecode_0_enabled=0\r\nwavecode_0_samples=75\r\nwavecode_0_sep=20\r\nwavecode_0_bSpectrum=0\r\nwavecode_0_bUseDots=1\r\nwavecode_0_bDrawThick=0\r\nwavecode_0_bAdditive=1\r\nwavecode_0_scaling=7.85800\r\nwavecode_0_smoothing=0.10000\r\nwavecode_0_r=1.000\r\nwavecode_0_g=0.000\r\nwavecode_0_b=0.000\r\nwavecode_0_a=0.200\r\nwavecode_1_enabled=0\r\nwavecode_1_samples=512\r\nwavecode_1_sep=0\r\nwavecode_1_bSpectrum=0\r\nwavecode_1_bUseDots=1\r\nwavecode_1_bDrawThick=1\r\nwavecode_1_bAdditive=0\r\nwavecode_1_scaling=0.89152\r\nwavecode_1_smoothing=0.82000\r\nwavecode_1_r=1.000\r\nwavecode_1_g=1.000\r\nwavecode_1_b=1.000\r\nwavecode_1_a=0.100\r\nwavecode_2_enabled=0\r\nwavecode_2_samples=512\r\nwavecode_2_sep=0\r\nwavecode_2_bSpectrum=0\r\nwavecode_2_bUseDots=0\r\nwavecode_2_bDrawThick=1\r\nwavecode_2_bAdditive=0\r\nwavecode_2_scaling=0.89152\r\nwavecode_2_smoothing=0.82000\r\nwavecode_2_r=0.000\r\nwavecode_2_g=0.200\r\nwavecode_2_b=0.000\r\nwavecode_2_a=1.000\r\nwavecode_3_enabled=0\r\nwavecode_3_samples=512\r\nwavecode_3_sep=0\r\nwavecode_3_bSpectrum=1\r\nwavecode_3_bUseDots=1\r\nwavecode_3_bDrawThick=0\r\nwavecode_3_bAdditive=0\r\nwavecode_3_scaling=1.00000\r\nwavecode_3_smoothing=0.50000\r\nwavecode_3_r=1.000\r\nwavecode_3_g=1.000\r\nwavecode_3_b=1.000\r\nwavecode_3_a=1.000\r\nshapecode_0_enabled=1\r\nshapecode_0_sides=33\r\nshapecode_0_additive=1\r\nshapecode_0_thickOutline=0\r\nshapecode_0_textured=0\r\nshapecode_0_num_inst=81\r\nshapecode_0_x=0.500\r\nshapecode_0_y=0.500\r\nshapecode_0_rad=0.04896\r\nshapecode_0_ang=0.00000\r\nshapecode_0_tex_ang=1.00531\r\nshapecode_0_tex_zoom=1.53117\r\nshapecode_0_r=1.000\r\nshapecode_0_g=1.000\r\nshapecode_0_b=1.000\r\nshapecode_0_a=0.000\r\nshapecode_0_r2=0.000\r\nshapecode_0_g2=0.000\r\nshapecode_0_b2=0.000\r\nshapecode_0_a2=0.000\r\nshapecode_0_border_r=1.000\r\nshapecode_0_border_g=1.000\r\nshapecode_0_border_b=0.000\r\nshapecode_0_border_a=0.000\r\nshape_0_per_frame1=\r\nshape_0_per_frame2=trel = time/4;\r\nshape_0_per_frame3=k1 = instance/num_inst;\r\nshape_0_per_frame4=k2 = k1 + trel - int(k1+trel);\r\nshape_0_per_frame5=\r\nshape_0_per_frame6=y0 = k2+.01 ;\r\nshape_0_per_frame7=\r\nshape_0_per_frame8=xwidth = .1*(cos(6*k1)+3); //breite\r\nshape_0_per_frame9=xofs = .1*cos(k2*6+trel)*y0;\r\nshape_0_per_frame10=x = .5 + .4*xwidth*(.2+y0)*sin(k1*1383*xwidth) + xofs;\r\nshape_0_per_frame11=//xwidth in der letzten Klammer : Test\r\nshape_0_per_frame12=\r\nshape_0_per_frame13=y = y0;\r\nshape_0_per_frame14=\r\nshape_0_per_frame15=bright = 1-sqr(y0); \r\nshape_0_per_frame16=a = max(bright,0)*.4; a2 = 0;\r\nshape_0_per_frame17=rad = .4*y0+.1 - .0*sin(k1*954);\r\nshape_0_per_frame18=\r\nshape_0_per_frame19=r = .0; g = 0; b = .0;\r\nshape_0_per_frame20=r2 = 0; g2 = 0; b2= .3; //## rot mit ampl. mod !\r\nshape_0_per_frame21=additive = 1; ///sonst andere farben im warp-s gestoert\r\nshapecode_1_enabled=0\r\nshapecode_1_sides=14\r\nshapecode_1_additive=1\r\nshapecode_1_thickOutline=1\r\nshapecode_1_textured=0\r\nshapecode_1_num_inst=21\r\nshapecode_1_x=0.500\r\nshapecode_1_y=0.500\r\nshapecode_1_rad=0.16056\r\nshapecode_1_ang=0.00000\r\nshapecode_1_tex_ang=0.00000\r\nshapecode_1_tex_zoom=0.93550\r\nshapecode_1_r=0.000\r\nshapecode_1_g=1.000\r\nshapecode_1_b=0.000\r\nshapecode_1_a=1.000\r\nshapecode_1_r2=0.000\r\nshapecode_1_g2=0.000\r\nshapecode_1_b2=0.000\r\nshapecode_1_a2=1.000\r\nshapecode_1_border_r=1.000\r\nshapecode_1_border_g=1.000\r\nshapecode_1_border_b=0.000\r\nshapecode_1_border_a=0.000\r\nshape_1_per_frame1=x = instance/num_inst;\r\nshape_1_per_frame2=y = .4;\r\nshape_1_per_frame3=a = .3;\r\nshape_1_per_frame4=a2 = 0;\r\nshapecode_2_enabled=0\r\nshapecode_2_sides=13\r\nshapecode_2_additive=1\r\nshapecode_2_thickOutline=0\r\nshapecode_2_textured=0\r\nshapecode_2_num_inst=212\r\nshapecode_2_x=0.650\r\nshapecode_2_y=0.380\r\nshapecode_2_rad=1.26467\r\nshapecode_2_ang=0.00000\r\nshapecode_2_tex_ang=0.00000\r\nshapecode_2_tex_zoom=0.73678\r\nshapecode_2_r=1.000\r\nshapecode_2_g=1.000\r\nshapecode_2_b=0.000\r\nshapecode_2_a=0.300\r\nshapecode_2_r2=1.000\r\nshapecode_2_g2=0.000\r\nshapecode_2_b2=0.000\r\nshapecode_2_a2=0.000\r\nshapecode_2_border_r=0.500\r\nshapecode_2_border_g=0.500\r\nshapecode_2_border_b=0.000\r\nshapecode_2_border_a=0.000\r\nshape_2_per_frame1=//q25 = time/4;\r\nshape_2_per_frame2=//trel = 2* (q25/2-int(q25/2));\r\nshape_2_per_frame3=trel = q25;\r\nshape_2_per_frame4=copies = 1;\r\nshape_2_per_frame5=copy = (instance%copies)/copies;\r\nshape_2_per_frame6=k1 = int(instance/copies)*copies/num_inst;\r\nshape_2_per_frame7=k2 = k1 + .5;\r\nshape_2_per_frame8=trel = trel ;\r\nshape_2_per_frame9=t0 = .5; //do not change\r\nshape_2_per_frame10=\r\nshape_2_per_frame11=phase = above(trel,t0);\r\nshape_2_per_frame12=mov1 = bnot(phase)* (t0-trel + .01*k1);\r\nshape_2_per_frame13=mov2 = phase * (trel-t0); //####\r\nshape_2_per_frame14=//mov2 = pow(mov2,.8);\r\nshape_2_per_frame15=stray = 1.2-phase;\r\nshape_2_per_frame16=\r\nshape_2_per_frame17=Tht = 3.14*sin(1234.2*k1+time*bnot(phase)) * stray ;\r\nshape_2_per_frame18=Phi = 3245.1*k1;\r\nshape_2_per_frame19=\r\nshape_2_per_frame20=size0 = .02;\r\nshape_2_per_frame21=ox = mov1*q27 + sin(Tht)*cos(phi)* (size0+mov2*(2+k1));\r\nshape_2_per_frame22=oy = mov1*12 + cos(Tht)* (size0+4*mov2*k2)*(1-mov2*k2)/2;\r\nshape_2_per_frame23=oz = mov1*8 + sin(Tht)*sin(phi)* (size0+mov2*2*(2+k1));\r\nshape_2_per_frame24=\r\nshape_2_per_frame25=z0 = 1;\r\nshape_2_per_frame26=rad = .03 / (oz+z0)/(1+trel*rand(100)/50);\r\nshape_2_per_frame27=\r\nshape_2_per_frame28=x = .5 + ox/(oz+z0);\r\nshape_2_per_frame29=y = q29+.2+ oy/(oz+z0);\r\nshape_2_per_frame30=\r\nshape_2_per_frame31=a = .1*bnot(phase)+phase*max(0,1-mov2*0)*above(oz+z0,0)*.8; \r\nshapecode_3_enabled=0\r\nshapecode_3_sides=14\r\nshapecode_3_additive=1\r\nshapecode_3_thickOutline=1\r\nshapecode_3_textured=1\r\nshapecode_3_num_inst=31\r\nshapecode_3_x=0.750\r\nshapecode_3_y=0.600\r\nshapecode_3_rad=0.01000\r\nshapecode_3_ang=0.00000\r\nshapecode_3_tex_ang=0.00000\r\nshapecode_3_tex_zoom=0.33570\r\nshapecode_3_r=1.000\r\nshapecode_3_g=1.000\r\nshapecode_3_b=0.000\r\nshapecode_3_a=0.500\r\nshapecode_3_r2=1.000\r\nshapecode_3_g2=0.000\r\nshapecode_3_b2=0.000\r\nshapecode_3_a2=0.000\r\nshapecode_3_border_r=0.200\r\nshapecode_3_border_g=0.700\r\nshapecode_3_border_b=0.500\r\nshapecode_3_border_a=0.000\r\nper_frame_init_1=q1 = 0; q2 = 0; q3 = 0; q4 = 0; q5 = 0; q6 = 0; q7 = 0; q8 = 0; q9 = 0; q10 = 0;\r\nper_frame_init_2=q11 = 0; q12 = 0; q13 = 0; q14 = 0; q15 = 0; q16 = 0; q17 = 0; q18 = 0; q19 = 0; q20 = 0;\r\nper_frame_init_3=q21 = 0; q22 = 0; q23 = 0; q24 = 0; q25 = 0; q26 = 0; q27 = 0; q28 = 0; q29 = 0; q10 = 3;\r\nper_frame_init_4=q31 = 0; q32 = 0;\r\nper_frame_init_5=\r\nper_frame_init_6=dir = 0;\r\nper_frame_init_7=rvol = 1;\r\nper_frame_init_8=n = 0;\r\nper_frame_init_9=loop (10000,\r\nper_frame_init_10=  gmegabuf(n) = 0;\r\nper_frame_init_11=  megabuf(n) = 0;\r\nper_frame_init_12=  n = n+1;\r\nper_frame_init_13=);\r\nper_frame_init_14=\r\nper_frame_1=dec_m = pow (0.8, 30/fps); dec_s = pow (0.94, 30/fps); \r\nper_frame_2=\r\nper_frame_3=\r\nper_frame_4=beat = bass+mid+treb; \r\nper_frame_5=avg = avg*dec_s + beat*(1-dec_s);\r\nper_frame_6=is_beat = above(beat, peak*8+1*avg) * above (time, t0+.2);\r\nper_frame_7=t0 = is_beat*time + (1-is_beat)*t0;\r\nper_frame_8=peak = is_beat * beat + (1-is_beat)*peak*dec_m;\r\nper_frame_9=index = (index + is_beat) %16;\r\nper_frame_10=index2 = (index2 + is_beat*bnot(index))%8;\r\nper_frame_11=\r\nper_frame_12=q20 = avg;\r\nper_frame_13=q22 = max(0,peak-.0)+.01;\r\nper_frame_14=q24 = is_beat;\r\nper_frame_15=q27 = index +1;\r\nper_frame_16=q28 = index2;\r\nper_frame_17=\r\nper_frame_18=p1 = dec_m * p1 + (1-dec_m) * index;\r\nper_frame_19=p2 = dec_m * p2 + (1-dec_m) * p1;\r\nper_frame_20=p1 = index;\r\nper_frame_21=rot1 = rot1 + sin(p1*2)/fps * avg/5;\r\nper_frame_22=rot2 = rot2 + cos(p1*2/3)/fps*avg/5;\r\nper_frame_23=q1 = rot1;\r\nper_frame_24=q2 = rot2;\r\nper_frame_25=\r\nper_frame_26=pulse = pulse + (bass>.8)/fps*(bass-.8)*16;\r\nper_frame_27=q8 = int(pulse*16)%16;\r\nper_frame_28=q9  = cos(q8)*3;\r\nper_frame_29=q10 = sin(q8)*3;\r\nper_frame_30=\r\nper_frame_31=trig = is_beat * bnot(index%6);\r\nper_frame_32=speed = .35 *pos_z*2 ;\r\nper_frame_33=\r\nper_frame_34=dir  = if (trig, dir + int(rand(3)-1.5)*3.1416/2, dir);\r\nper_frame_35=dir_ = dec_m*dir_ + (1-dec_m)*dir;\r\nper_frame_36=dir__ = dec_m*dir__ + (1-dec_m)*dir_;\r\nper_frame_37=xpos = xpos + cos(dir_)/fps*speed +q24;\r\nper_frame_38=ypos = ypos + sin(dir_)/fps*speed +q24;\r\nper_frame_39=q5 = xpos;\r\nper_frame_40=q6 = ypos;\r\nper_frame_41=\r\nper_frame_42=proxy = max(min(sin((q28%2)*q27+(xpos+ypos)),.5),-.5);\r\nper_frame_43=\r\nper_frame_44=xang =0*cos(dir); yang = 0*sin(dir);\r\nper_frame_45=zang = dir__; ;\r\nper_frame_46=\r\nper_frame_47=pos_z = .5 + proxy/2;\r\nper_frame_48=q29 = .02/pos_z;\r\nper_frame_49=\r\nper_frame_50=ox = 0; oy = 0; oz = pos_z;\r\nper_frame_51=mx = ox*cos(zang) - oy*sin(zang);\r\nper_frame_52=my = ox*sin(zang) + oy*cos(zang);\r\nper_frame_53=ox = mx;oy = my;\r\nper_frame_54=mx = ox*cos(yang) + oz*sin(yang);\r\nper_frame_55=mz = - ox*sin(yang) + oz*cos(yang);\r\nper_frame_56=ox = mx;oz = mz;\r\nper_frame_57=my = oy*cos(xang) - oz*sin(xang);\r\nper_frame_58=mz = oy*sin(xang) + oz*cos(xang);\r\nper_frame_59=oy = my;oz = mz;\r\nper_frame_60=q11=ox; q12 = oy; q13 = oz; //Position\r\nper_frame_61=\r\nper_frame_62=//Vektor x nach rechts\r\nper_frame_63=ox = 1; oy = 0; oz = 0;\r\nper_frame_64=mx = ox*cos(zang) - oy*sin(zang);\r\nper_frame_65=my = ox*sin(zang) + oy*cos(zang);\r\nper_frame_66=ox = mx;oy = my;\r\nper_frame_67=mx = ox*cos(yang) + oz*sin(yang);\r\nper_frame_68=mz = - ox*sin(yang) + oz*cos(yang);\r\nper_frame_69=ox = mx;oz = mz;\r\nper_frame_70=my = oy*cos(xang) - oz*sin(xang);\r\nper_frame_71=mz = oy*sin(xang) + oz*cos(xang);\r\nper_frame_72=oy = my;oz = mz;\r\nper_frame_73=q14=ox; q15 = oy; q16 = oz;\r\nper_frame_74=\r\nper_frame_75=\r\nper_frame_76=//Vektor z nach hinten\r\nper_frame_77=ox = 0; oy = 0; oz = 1;;\r\nper_frame_78=\r\nper_frame_79=mx = ox*cos(zang) - oy*sin(zang);\r\nper_frame_80=my = ox*sin(zang) + oy*cos(zang);\r\nper_frame_81=ox = mx;oy = my;\r\nper_frame_82=mx = ox*cos(yang) + oz*sin(yang);\r\nper_frame_83=mz = - ox*sin(yang) + oz*cos(yang);\r\nper_frame_84=ox = mx;oz = mz;\r\nper_frame_85=my = oy*cos(xang) - oz*sin(xang);\r\nper_frame_86=mz = oy*sin(xang) + oz*cos(xang);\r\nper_frame_87=oy = my;\r\nper_frame_88=oz = mz;\r\nper_frame_89=q17=ox; q18 = oy; q19 = oz;\r\nper_frame_90=\r\nper_frame_91=\r\nper_pixel_1=dx = .02;\r\nwarp_1=`sampler sampler_pw_noise_lq;\r\nwarp_2=`sampler sampler_pw_noise_hq;\r\nwarp_3=`static const float3 size1 =  float3(.1,.2,.25);\r\nwarp_4=`static const float3 posx1 = float3(.1,.275,.88)+.4;\r\nwarp_5=`static const float3 posy1 = float3(.064,.3,.5);\r\nwarp_6=`\r\nwarp_7=`static const float3 size2 =  float3(.1,.1,.2);\r\nwarp_8=`static const float3 posx2 = float3(.1,-.125,.08);\r\nwarp_9=`static const float3 posy2 = float3(.064,.4,.6);\r\nwarp_10=`float2 uv1, rs0, rs, uv2, uv3, dz, hor, ver;\r\nwarp_11=`float noise, z, dist, cog1, rod1, cog2, trel;\r\nwarp_12=`\r\nwarp_13=`float cog (float3 uvx, float3 uvy, float3 size, float3 rot) {float3 rad1, ang1, wheel; float res;\r\nwarp_14=`  uvx = frac(1*uvx)-.5; uvy = frac(1*uvy)-.5;\r\nwarp_15=`  rad1 = sqrt(uvx*uvx+uvy*uvy);  ang1 = atan2(uvx,uvy)+rot/size;\r\nwarp_16=`  wheel = saturate(100*(size-rad1) - 1.5*clamp(sin(180*ang1*size),-.7,.7));\r\nwarp_17=`  wheel -= .25*saturate(sin(rad1*120));\r\nwarp_18=`  wheel -= saturate(4*sin(rad1*32+3.5)-2) * saturate(4*sin(8*ang1));;\r\nwarp_19=`  wheel = saturate(wheel)*float3(0,1,1); //##\r\nwarp_20=`  \r\nwarp_21=`  res = wheel.r + saturate(1-0*wheel.r)*wheel.g;\r\nwarp_22=`  res += saturate(1-0*res)*wheel.b;\r\nwarp_23=`  return res;}\r\nwarp_24=`\r\nwarp_25=`\r\nwarp_26=`float rod (float2 uvi) {float3 rad1 ; float res;\r\nwarp_27=`    uvi = frac(uvi)-.5; \r\nwarp_28=`    rad1 = saturate (2-64*abs(uvi.x)+exp(-uvi.y*uvi.y*128));\r\nwarp_29=`    rad1 -= .2*(uvi.x*uvi.x+uvi.y*uvi.y <= .0004);\r\nwarp_30=`    rad1 -= .5*saturate(1.4-uvi.x*uvi.x*2048);\r\nwarp_31=`    return saturate(rad1);}\r\nwarp_32=`\r\nwarp_33=`\r\nwarp_34=`shader_body {\r\nwarp_35=`uv1 = (uv-.5);\r\nwarp_36=`\r\nwarp_37=`//Zahnraeder\r\nwarp_38=`trel = q1;\r\nwarp_39=`cog1 = cog (uv1.x+posx1, uv1.y+posy1, size1, float3 (1,-1,1)*trel + float3(0.012,-0.029,0.0));\r\nwarp_40=`\r\nwarp_41=`rod1 = rod (uv1 + float2(posx1[2],posy1[2]) + size1[2]*.6*float2(cos(trel*4), sin(trel*4)));\r\nwarp_42=`\r\nwarp_43=`trel = q2;\r\nwarp_44=`cog2 = cog (uv1.x+posx2, uv1.y+posy2, size2, float3 (1,-1,1)*trel + float3(0.012,-0.029,0.0));\r\nwarp_45=`\r\nwarp_46=`ret.g = cog1 + .8*saturate(1-8*cog1)*cog2;\r\nwarp_47=`ret.g = rod1 + .8*saturate(1-8*rod1)*ret.g;\r\nwarp_48=`//ret.g = cog2;\r\nwarp_49=`//ret.g = cog1;\r\nwarp_50=`\r\nwarp_51=`\r\nwarp_52=`float copy = tex2D (sampler_fw_main, (uv_orig-.5).yx*2+.25+.0*float2(q5,q6)).g;\r\nwarp_53=`ret.g = max(ret.g,copy*.4);\r\nwarp_54=`\r\nwarp_55=`\r\nwarp_56=`ret.b = GetPixel(uv).b*.5;\r\nwarp_57=`\r\nwarp_58=`\r\nwarp_59=`}\r\ncomp_1=`sampler sampler_pw_noise_lq;\r\ncomp_2=`static const float quality =3, depth = q29;\r\ncomp_3=`float3 screen3, sun, cog;\r\ncomp_4=`float2 dz, uv0, uv1, uv2, uv4, rsk, dz1,tmp2, Kugel1, rsl;\r\ncomp_5=`float  m,n,noise,mask, smoke, mask1, gmask,dx,dy,rad1, lprof,dist,flash;\r\ncomp_6=`float  mask2;\r\ncomp_7=`static float2 hor = float2 (texsize.z,0)*2;\r\ncomp_8=`static float2 ver = float2 (0,texsize.w)*2;\r\ncomp_9=`static float2 mov = float2 (q5,q6);\r\ncomp_10=`\r\ncomp_11=`static float3 t = float3(q14,q15,q16);\r\ncomp_12=`static float3 s = float3(q17,q18,q19);\r\ncomp_13=`static float3 ts = -cross(s,t);\r\ncomp_14=`static float3 pos = float3 (q11,q12,q13);\r\ncomp_15=`float3 lavcol (float t) {return saturate(float3(t,pow(t,2.1),pow(t,6)));}\r\ncomp_16=`\r\ncomp_17=`float2 project (float dist) {  float z;\r\ncomp_18=`  z = 4*dist/mul(cross(ts,-t),screen3);\r\ncomp_19=`  gmask = (z >= -4) * (z <= 4);\r\ncomp_20=`  return float2(mul(float2x3(ts,t),cross(pos,screen3))*z*gmask);}\r\ncomp_21=`\r\ncomp_22=`shader_body {uv0 = uv;\r\ncomp_23=`screen3 = float3 ((uv-.5)*aspect.xy,1);//wirkt wie zoom / Tele ###\r\ncomp_24=`\r\ncomp_25=`//********* SMOKE\r\ncomp_26=`dist = .25; \r\ncomp_27=`rsl = project (dist)+ mov*.5 ;\r\ncomp_28=`smoke = GetPixel(frac(rsl)).b ; //mittelwert null !#\r\ncomp_29=`\r\ncomp_30=`//********* COGWHEELS\r\ncomp_31=`dist = .5; \r\ncomp_32=`for (m=1; m <= quality; m++) {\r\ncomp_33=`  rsl = project (dist)+ mov ;\r\ncomp_34=`  lprof = GetPixel(frac(rsl)).g-.5 ; //mittelwert null !#\r\ncomp_35=`  dist -= lprof/quality*depth; \r\ncomp_36=`}\r\ncomp_37=`cog = lprof+.5;\r\ncomp_38=`\r\ncomp_39=`mask = saturate(4*cog-smoke*2);// * (rsl.y >= -1) : Oberkante;\r\ncomp_40=`mask1 = saturate(8*cog);\r\ncomp_41=`dz.x = GetPixel (rsl.xy-hor).g - GetPixel (rsl.xy+hor).g;\r\ncomp_42=`dz.y = GetPixel (rsl.xy-ver).g - GetPixel (rsl.xy+ver).g;\r\ncomp_43=`sun = saturate(.1/length(sin(rsl*4)+dz*16)) ;\r\ncomp_44=`sun *= .5+.5*tex2D (sampler_noise_hq,sun/4+mov/4);\r\ncomp_45=`cog = 2*sun*(1+1*cog);\r\ncomp_46=`ret = lerp(smoke/2,cog,mask) ;\r\ncomp_47=`\r\ncomp_48=`rsl = project(.5)+float2(q9,q10);\r\ncomp_49=`flash = saturate(1+(q8%2)-mask1)*bass/2/sqrt(length(sin(time+q8+4*atan2(rsl.y,rsl.x))));\r\ncomp_50=`ret += (.1+smoke)*(q28%3 <= 1)*flash*float3(0,.5,1);\r\ncomp_51=`//ret = GetPixel(uv0*aspect.xy+.0);\r\ncomp_52=`}\r\ncomp_53=`\r\ncomp_54=`written by martin\r\ncomp_55=`END\r\n"
}