{
  "name": "martin - autumn leaves",
  "description": "martin - autumn leaves",
  "milkdrop_raw": "MILKDROP_PRESET_VERSION=201\r\nPSVERSION=3\r\nPSVERSION_WARP=3\r\nPSVERSION_COMP=3\r\n[preset00]\r\nfRating=5.000000\r\nfGammaAdj=1.880\r\nfDecay=0.500\r\nfVideoEchoZoom=1.000\r\nfVideoEchoAlpha=0.500\r\nnVideoEchoOrientation=3\r\nnWaveMode=4\r\nbAdditiveWaves=1\r\nbWaveDots=0\r\nbWaveThick=0\r\nbModWaveAlphaByVolume=1\r\nbMaximizeWaveColor=0\r\nbTexWrap=1\r\nbDarkenCenter=0\r\nbRedBlueStereo=0\r\nbBrighten=0\r\nbDarken=1\r\nbSolarize=0\r\nbInvert=0\r\nfWaveAlpha=0.526\r\nfWaveScale=1.050\r\nfWaveSmoothing=0.000\r\nfWaveParam=-0.220\r\nfModWaveAlphaStart=0.810\r\nfModWaveAlphaEnd=1.400\r\nfWarpAnimSpeed=1.459\r\nfWarpScale=2.007\r\nfZoomExponent=1.00000\r\nfShader=0.300\r\nzoom=0.99990\r\nrot=0.00000\r\ncx=0.500\r\ncy=0.500\r\ndx=0.00000\r\ndy=0.00000\r\nwarp=0.00909\r\nsx=0.99990\r\nsy=1.00000\r\nwave_r=0.000\r\nwave_g=0.000\r\nwave_b=0.000\r\nwave_x=0.500\r\nwave_y=0.500\r\nob_size=0.050\r\nob_r=0.800\r\nob_g=1.000\r\nob_b=1.000\r\nob_a=0.000\r\nib_size=0.000\r\nib_r=0.000\r\nib_g=0.000\r\nib_b=0.000\r\nib_a=0.000\r\nnMotionVectorsX=64.000\r\nnMotionVectorsY=48.000\r\nmv_dx=0.000\r\nmv_dy=0.000\r\nmv_l=1.850\r\nmv_r=0.500\r\nmv_g=0.500\r\nmv_b=0.500\r\nmv_a=0.000\r\nb1n=0.000\r\nb2n=0.000\r\nb3n=0.000\r\nb1x=0.800\r\nb2x=0.700\r\nb3x=1.000\r\nb1ed=0.250\r\nwavecode_0_enabled=0\r\nwavecode_0_samples=182\r\nwavecode_0_sep=60\r\nwavecode_0_bSpectrum=0\r\nwavecode_0_bUseDots=1\r\nwavecode_0_bDrawThick=0\r\nwavecode_0_bAdditive=0\r\nwavecode_0_scaling=0.14868\r\nwavecode_0_smoothing=0.00000\r\nwavecode_0_r=1.000\r\nwavecode_0_g=1.000\r\nwavecode_0_b=1.000\r\nwavecode_0_a=0.400\r\nwave_0_per_frame1=t1 = 1; t2 = 0;\r\nwavecode_1_enabled=0\r\nwavecode_1_samples=100\r\nwavecode_1_sep=0\r\nwavecode_1_bSpectrum=0\r\nwavecode_1_bUseDots=1\r\nwavecode_1_bDrawThick=1\r\nwavecode_1_bAdditive=0\r\nwavecode_1_scaling=0.89152\r\nwavecode_1_smoothing=0.00000\r\nwavecode_1_r=1.000\r\nwavecode_1_g=1.000\r\nwavecode_1_b=1.000\r\nwavecode_1_a=0.100\r\nwavecode_2_enabled=0\r\nwavecode_2_samples=512\r\nwavecode_2_sep=0\r\nwavecode_2_bSpectrum=0\r\nwavecode_2_bUseDots=0\r\nwavecode_2_bDrawThick=1\r\nwavecode_2_bAdditive=0\r\nwavecode_2_scaling=0.89152\r\nwavecode_2_smoothing=0.82000\r\nwavecode_2_r=1.000\r\nwavecode_2_g=1.000\r\nwavecode_2_b=1.000\r\nwavecode_2_a=0.100\r\nwavecode_3_enabled=0\r\nwavecode_3_samples=512\r\nwavecode_3_sep=0\r\nwavecode_3_bSpectrum=1\r\nwavecode_3_bUseDots=1\r\nwavecode_3_bDrawThick=0\r\nwavecode_3_bAdditive=0\r\nwavecode_3_scaling=1.00000\r\nwavecode_3_smoothing=0.50000\r\nwavecode_3_r=1.000\r\nwavecode_3_g=1.000\r\nwavecode_3_b=1.000\r\nwavecode_3_a=1.000\r\nshapecode_0_enabled=0\r\nshapecode_0_sides=4\r\nshapecode_0_additive=0\r\nshapecode_0_thickOutline=0\r\nshapecode_0_textured=1\r\nshapecode_0_num_inst=1\r\nshapecode_0_x=0.700\r\nshapecode_0_y=0.300\r\nshapecode_0_rad=0.48446\r\nshapecode_0_ang=0.00000\r\nshapecode_0_tex_ang=0.00000\r\nshapecode_0_tex_zoom=1.87510\r\nshapecode_0_r=1.000\r\nshapecode_0_g=1.000\r\nshapecode_0_b=1.000\r\nshapecode_0_a=1.000\r\nshapecode_0_r2=1.000\r\nshapecode_0_g2=1.000\r\nshapecode_0_b2=1.000\r\nshapecode_0_a2=0.000\r\nshapecode_0_border_r=1.000\r\nshapecode_0_border_g=1.000\r\nshapecode_0_border_b=0.000\r\nshapecode_0_border_a=0.000\r\nshapecode_1_enabled=0\r\nshapecode_1_sides=32\r\nshapecode_1_additive=0\r\nshapecode_1_thickOutline=0\r\nshapecode_1_textured=0\r\nshapecode_1_num_inst=37\r\nshapecode_1_x=0.500\r\nshapecode_1_y=0.500\r\nshapecode_1_rad=0.03630\r\nshapecode_1_ang=0.81681\r\nshapecode_1_tex_ang=0.37699\r\nshapecode_1_tex_zoom=1.02841\r\nshapecode_1_r=1.000\r\nshapecode_1_g=1.000\r\nshapecode_1_b=1.000\r\nshapecode_1_a=0.050\r\nshapecode_1_r2=1.000\r\nshapecode_1_g2=1.000\r\nshapecode_1_b2=1.000\r\nshapecode_1_a2=0.000\r\nshapecode_1_border_r=1.000\r\nshapecode_1_border_g=1.000\r\nshapecode_1_border_b=1.000\r\nshapecode_1_border_a=0.000\r\nshapecode_2_enabled=0\r\nshapecode_2_sides=26\r\nshapecode_2_additive=0\r\nshapecode_2_thickOutline=0\r\nshapecode_2_textured=0\r\nshapecode_2_num_inst=2\r\nshapecode_2_x=0.500\r\nshapecode_2_y=0.500\r\nshapecode_2_rad=0.15038\r\nshapecode_2_ang=0.00000\r\nshapecode_2_tex_ang=0.62832\r\nshapecode_2_tex_zoom=1.35189\r\nshapecode_2_r=1.000\r\nshapecode_2_g=1.000\r\nshapecode_2_b=1.000\r\nshapecode_2_a=0.500\r\nshapecode_2_r2=1.000\r\nshapecode_2_g2=1.000\r\nshapecode_2_b2=1.000\r\nshapecode_2_a2=0.000\r\nshapecode_2_border_r=0.500\r\nshapecode_2_border_g=0.500\r\nshapecode_2_border_b=0.500\r\nshapecode_2_border_a=0.000\r\nshapecode_3_enabled=0\r\nshapecode_3_sides=24\r\nshapecode_3_additive=0\r\nshapecode_3_thickOutline=0\r\nshapecode_3_textured=1\r\nshapecode_3_num_inst=1\r\nshapecode_3_x=0.700\r\nshapecode_3_y=0.510\r\nshapecode_3_rad=0.19869\r\nshapecode_3_ang=0.00000\r\nshapecode_3_tex_ang=1.00531\r\nshapecode_3_tex_zoom=0.49981\r\nshapecode_3_r=1.000\r\nshapecode_3_g=1.000\r\nshapecode_3_b=0.990\r\nshapecode_3_a=0.000\r\nshapecode_3_r2=0.000\r\nshapecode_3_g2=0.000\r\nshapecode_3_b2=0.000\r\nshapecode_3_a2=1.000\r\nshapecode_3_border_r=0.000\r\nshapecode_3_border_g=0.500\r\nshapecode_3_border_b=0.500\r\nshapecode_3_border_a=0.000\r\nper_frame_init_1=zo=1; zo_=0.1; zo__=0.02; tstart=time;\r\nper_frame_init_2=t1=rand(12); t2=rand(12);\r\nper_frame_1=dt=1/fps; dec_m = 1-2*dt; dec_s = 1-0.5*dt; \r\nper_frame_2=vol = (2*bass_att+mid_att+treb_att)/3;\r\nper_frame_3=\r\nper_frame_4=p = progress;\r\nper_frame_5=trest = if (p==0,100000, (time-tstart)*(1-p)/p);\r\nper_frame_6=\r\nper_frame_7=v = max(0,vol);\r\nper_frame_8=dec = if (v>vol_,1-1*dt,1-0.25*dt);\r\nper_frame_9=vol_= vol_*dec+(1-dec)*v;\r\nper_frame_10=spd = vol_*dt * (0.5+zo__)/4;\r\nper_frame_11=\r\nper_frame_12=isb = above(vol, pk) * (time>t0+.5);\r\nper_frame_13=if (isb,t0=time; pk=vol*3,Pk*=dec_s);\r\nper_frame_14=bi += isb;\r\nper_frame_15=\r\nper_frame_16=sw = isb&&(rand(1)>0.7)&&(time-ts>8);\r\nper_frame_17=if (sw,ts=time,0);\r\nper_frame_18=zo = if(sw, int(rand(3))*0.7+0.3,zo);\r\nper_frame_19=zo_ += atan(10*(zo-zo_))*dt*0.2;\r\nper_frame_20=zo__ = zo__*dec_m + (1-dec_m)*zo_;\r\nper_frame_21=\r\nper_frame_22=\r\nper_frame_23=if (isb&&(bi%2==0),r1 = rand(2)-1,0);\r\nper_frame_24=if (isb&&(bi%3==0),r2 = rand(2)-1,0);\r\nper_frame_25=if (isb&&(bi%5==2),r3 = rand(2)-1,0);\r\nper_frame_26=\r\nper_frame_27=r1a += atan(50*(r1-r1a))*spd*.1;\r\nper_frame_28=r2a += atan(50*(r2-r2a))*spd*.1;\r\nper_frame_29=r3a += atan(50*(r3-r3a))*spd*.1;\r\nper_frame_30=\r\nper_frame_31=r1b = r1b*dec_m + (1-dec_m)*r1a;\r\nper_frame_32=r2b = r2b*dec_m + (1-dec_m)*r2a;\r\nper_frame_33=r3b = r3b*dec_m + (1-dec_m)*r3a;\r\nper_frame_34=r1c = r1c*dec_m + (1-dec_m)*r1b;\r\nper_frame_35=r2c = r2c*dec_m + (1-dec_m)*r2b;\r\nper_frame_36=r3c = r3c*dec_m + (1-dec_m)*r3b;\r\nper_frame_37=\r\nper_frame_38=s1 += (1+r1c)*spd;\r\nper_frame_39=s2 += (r2c)*spd;\r\nper_frame_40=s3 += (1+r2c)*spd;\r\nper_frame_41=\r\nper_frame_42=q1=r1c;\r\nper_frame_43=q2=r2c;\r\nper_frame_44=q3=r3c;\r\nper_frame_45=q4=(q1-q2)*0.2;\r\nper_frame_46=q5=s1;\r\nper_frame_47=q6=s2;\r\nper_frame_48=q7=s3*4;\r\nper_frame_49=q8=(s2+s3)*12;\r\nper_frame_50=q10 = zo__;\r\nper_frame_51=\r\nper_frame_52=q12 = 0.2; //front-back light\r\nper_frame_53=tr = tr*dec_m + (1-dec_m)*trest/5;\r\nper_frame_54=q20 = max(0,min(1,tr)); //fade - does not work\r\nper_frame_55=\r\nper_frame_56=//colors\r\nper_frame_57=t1 += spd*0.12;\r\nper_frame_58=t2 += spd*0.07;\r\nper_frame_59=q21 = 1.5 + 0.3*sin(t1);\r\nper_frame_60=q22 = 1 + 0.3*sin(t2); \r\nper_frame_61=monitor = t1;\r\nper_pixel_1=rot = -q1*(sqr(x-0.5+0.2*(q2+q3))+ sqr(y-0.5+0.2*(q1-q3)));\r\nper_pixel_2=fac = 0.04;\r\nper_pixel_3=rot -= (sin(x*8+8*q1)+sin(y*8+q3*8))*fac;\r\nper_pixel_4=zoom = 1-(y-0.5)*sin((q5+q6)*0.3);\r\nwarp_1=`#define sat saturate\r\nwarp_2=`sampler sampler_pw_noise_lq;\r\nwarp_3=`float dr, smask, stripe, h, dist;\r\nwarp_4=`float2 uv1, uv2, uv3,uv4,uv5,uv6;\r\nwarp_5=`float3 lea, noise, ret1, struc, neu;\r\nwarp_6=`\r\nwarp_7=`float aTan2(float y, float x) {float angle;\t float abs_y = abs(y); float r; \r\nwarp_8=`if (x>=0) {r=1-(x-abs_y) / (x+abs_y); } else {r=3-(x+abs_y) / (abs_y-x);}\t\r\nwarp_9=`return (y < 0 ? -r : r)/4;}\r\nwarp_10=`\r\nwarp_11=`shader_body {\r\nwarp_12=`float2 uv1 = (uv-.5+0.2*q2)*aspect.xy;\r\nwarp_13=`lea = 0;\r\nwarp_14=`int anz = 4;\r\nwarp_15=`for (float n=anz; n>0; n--) {\r\nwarp_16=`  dist = (1.5+q2)*0.33*n/anz;\r\nwarp_17=`  uv4 = 256 * (dist* uv1)*q10;\r\nwarp_18=`\r\nwarp_19=`  float aa = (1.0+q3/2)*n/anz+q1*(1+uv1.x*0)/2 ;\r\nwarp_20=`  uv4 = mul(uv4,float2x2(cos(aa),-sin(aa),sin(aa),cos(aa)));\r\nwarp_21=`  stripe = (16-0.8*abs(floor(uv4.x)));;\r\nwarp_22=`  uv4.y += stripe*q5 + (16-stripe)*q6 - 8.0*n;\r\nwarp_23=`\r\nwarp_24=`  noise = tex2D (sampler_pw_noise_lq,uv4/256);\r\nwarp_25=`  smask = sat (64*(noise.b-(0.98-(stripe/16)*0.1))); //0.1=dens.\r\nwarp_26=`\r\nwarp_27=`  aa =  (noise.g-0.5)*q8;\r\nwarp_28=`  uv5 = mul(frac(uv4)-0.5,float2x2(cos(aa),-sin(aa),sin(aa),cos(aa)));\r\nwarp_29=`\r\nwarp_30=`  dr = (abs(sin(uv4.y*0.5 +2*q7*noise.r)));\r\nwarp_31=`  uv5.x *= 1/dr;\r\nwarp_32=`  struc = tex2D(sampler_noise_hq,0.5*aTan2(uv5.x,uv5.y+0.4))-0.5;\r\nwarp_33=`  uv6 = uv5;\r\nwarp_34=`  uv5 += struc*n*.25*(noise.r);\r\nwarp_35=`  h = smask*sat (8-16*length(uv5));\r\nwarp_36=`  neu = h*float3 ((noise.rg+float2(q21,q22))*(.16/abs(dr-struc.x)),0.9);\r\nwarp_37=`  lea = lerp (lea, neu, h);\r\nwarp_38=`}\r\nwarp_39=`//lea.rg *= 1-sat(tex2D(sampler_noise_lq,uv6*.1).r-.4)*h;\r\nwarp_40=`ret = lea;\r\nwarp_41=`//ret = max (ret, (ret.b==0)*GetPixel((uv_orig-0.5)*2+0.4)*0.6);\r\nwarp_42=`\r\nwarp_43=`}\r\ncomp_1=`#define sat saturate\r\ncomp_2=`sampler sampler_clouds;\r\ncomp_3=`float z, sun, tmp;\r\ncomp_4=`float2 uv1, uv2, dz;\r\ncomp_5=`float3 sky, cloud, lea;\r\ncomp_6=`static float2 hor = float2 (texsize.z,0)*1;\r\ncomp_7=`static float2 ver = float2 (0,texsize.w)*1;\r\ncomp_8=`\r\ncomp_9=`float2 noise4 (float2 uvi) { float2 n1,n2,n3,n4,n5, zv; zv = 0.003*time;\r\ncomp_10=`  n1 = tex2D(sampler_noise_hq, (uvi));\r\ncomp_11=`  n2 = tex2D(sampler_noise_hq, (uvi*3+zv));\r\ncomp_12=`  n3 = tex2D(sampler_noise_hq, (uvi*9+zv));\r\ncomp_13=`  return sat(n1 + n2/3 + n3/9-0.5);}\r\ncomp_14=`\r\ncomp_15=`shader_body {\r\ncomp_16=`uv1 = uv-.5;\r\ncomp_17=`tmp = 0; \r\ncomp_18=`for (int n = 1; n <= 4; n++) {\r\ncomp_19=`  uv2 = 0.16*uv1 * (1-tmp*.05)*(.5+uv.y)*q10 + .004*time;\r\ncomp_20=`  tmp = noise4(uv2).x;\r\ncomp_21=`}\r\ncomp_22=`cloud = sat(tmp) ;\r\ncomp_23=`\r\ncomp_24=`ret = float3 (0.2,0.4,1.25)*sat(uv.y)*(rand_preset.z-0.2)+cloud*0.5*(1.4-uv.y);\r\ncomp_25=`ret += 0.1/length(uv-1.1*rand_preset.xy+0*noise4(uv*0.25)*.25) * float3 (1,0.8,0.5)* sat(1-cloud);\r\ncomp_26=`ret *= 1-pow(rad,2)*0.7;\r\ncomp_27=`uv2 = (uv-0.5)*0.5+0.45+0.05*q3;\r\ncomp_28=`dz.x=GetPixel(uv2-hor)-GetPixel(uv2+hor);\r\ncomp_29=`dz.y=GetPixel(uv2-ver)-GetPixel(uv2+ver);\r\ncomp_30=`\r\ncomp_31=`lea = GetPixel(uv2);\r\ncomp_32=`ret *= sat (1-lea.b);\r\ncomp_33=`ret += lea*float3(1,1,0) * (1+q12);\r\ncomp_34=`\r\ncomp_35=`lea =  lerp(2*GetBlur1(uv),GetPixel(uv),sat(6*q10-2)) * sat(1-8*lea.b) ;\r\ncomp_36=`ret *= sat (1-lea.b*0.8);\r\ncomp_37=`ret += lea*float3(1,1,0) * (1-q12);\r\ncomp_38=`\r\ncomp_39=`ret = lerp (lum(ret)*(q20*0.6+0.4),ret,q20);\r\ncomp_40=`//if (ret.r == 0) {discard;}\r\ncomp_41=`\r\ncomp_42=`}\r\ncomp_43=`written by martin\r\ncomp_44=`END\r\n"
}